<!DOCTYPE html>
<!-- saved from url=(0055)https://iidadaikigithub.github.io/2taku/doubutu/s1.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„Éà„Éº„Éû„Çπ„ÄÄ„ÇØ„Ç§„Ç∫</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #fff;
    }
    #quizContainer {
      width: 100vw;
      max-width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: 0;
    }
    #question {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 90vw;
      margin: 2vw 0 4vw 0;
      min-height: 10vw;
    }
    #questionText {
      font-size: 5vw;
      font-weight: bold;
      background: #fff;
      padding: 2vw 4vw;
      border-radius: 2vw;
      box-shadow: 0 0 0 0.5vw #000;
      z-index: 2;
      position: relative;
      display: inline-block;
      line-height: 1.2;
    }
    #questionText.speaking {
      animation: speak-bounce 0.7s ease-in-out;
    }
    @keyframes speak-bounce {
      0% { transform: scale(1); }
      20% { transform: scale(1.15); }
      50% { transform: scale(0.95); }
      80% { transform: scale(1.10); }
      100% { transform: scale(1); }
    }
    .options {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-end;
      gap: 4vw;
      width: 90vw;
      max-width: 900px;
      min-width: 220px;
      margin: 0 auto;
      flex-wrap: nowrap;
      overflow-x: visible;
      box-sizing: border-box;
    }
    .option-img {
      flex: 1 1 0;
      width: 48%;
      height: auto;
      aspect-ratio: 16/9;
      max-width: 420px;
      min-width: 80px;
      margin: 0;
      cursor: pointer;
      border: 0.7vw solid #000;
      border-radius: 2vw;
      object-fit: contain;
      background: #fff;
      box-sizing: border-box;
      transition: transform 0.2s;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-drag: none;
      display: block;
    }
    .zoom {
      transform: scale(1.2);
    }
    #speakBtn {
      margin-left: 2vw;
      font-size: 6vw;
      background: #fff;
      border: 1vw solid #000;
      border-radius: 50%;
      width: 10vw;
      height: 10vw;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    #speakBtn.speaking {
      animation: mic-bounce 0.4s cubic-bezier(.4,2,.6,1);
    }
    @keyframes mic-bounce {
      0% { transform: scale(1); }
      50% { transform: scale(1.25); }
      100% { transform: scale(1); }
    }
    #resultImg {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 80vw;
      max-height: 80vh;
      z-index: 9999;
    }
    @media (max-width: 900px) {
      #questionText {
        font-size: 6vw;
      }
      .options {
        flex-wrap: nowrap;
      }
      .option-img {
        width: 80vw;
        height: 45vw;
        max-width: 98vw;
        max-height: 54vw;
        min-width: 80px;
        min-height: 40px;
      }
    }
    @media (max-width: 600px) {
      #questionText {
        font-size: 8vw;
      }
      .options {
        width: 98vw;
        max-width: 100vw;
        gap: 2vw;
      }
      .option-img {
        max-width: 100vw;
        min-width: 40px;
      }
      #speakBtn {
        font-size: 8vw;
        width: 10vw;
        height: 10vw;
      }
    }
    html, body {
      overscroll-behavior: none;
      touch-action: none;
      -ms-touch-action: none;
      user-select: none;
      -webkit-user-select: none;
      -webkit-touch-callout: none;
      -webkit-user-drag: none;
    }
    body {
      overflow: hidden;
    }
  </style>
</head>
<body>

<div id="quizContainer">
  <div id="question">
    <span id="questionText">„ÅÜ„Åó„ÄÄ„ÅØ „Å©„ÇåÔºü</span>
    <button id="speakBtn"><span aria-label="„Éû„Ç§„ÇØ" role="img">üé§</span></button>
  </div>
  <div id="options" class="options"><img src="./„ÇØ„Ç§„Ç∫_files/7.jpg" alt="Option" class="option-img" draggable="false" style="height: 374px;"><img src="./„ÇØ„Ç§„Ç∫_files/8.jpg" alt="Option" class="option-img" draggable="false" style="height: 374px;"></div>
  <audio id="correctAudio" src="audio/seikai.mp3"></audio>
  <audio id="incorrectAudio" src="audio/matigai.mp3"></audio>
  <img id="resultImg" src="./„ÇØ„Ç§„Ç∫_files/seikai.gif" alt="Ê≠£Ëß£ÁîªÂÉè" style="display: none;">
</div>

<script>
  const questions = [
    "„Éà„Éº„Éû„Çπ„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éë„Éº„Ç∑„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éã„Ç¢„ÄÄ„ÅØ „Å©„ÇåÔºü",
    "„Ç´„Éä„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éá„Ç£„Éº„Çº„É´„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éñ„É´„Éº„Éé„ÄÄ„ÅØ „Å©„ÇåÔºü",
    "„Ç´„Éº„É™„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Çµ„É≥„Éá„Ç£„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Ç¥„Éº„Éâ„É≥„ÄÄ„ÅØ „Å©„ÇåÔºü",
"„Éí„É≠„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éè„É≠„É´„Éâ„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Éà„ÉÉ„Éó„Éè„É†„Éª„Éè„ÉÉ„Éà„ÄÄ„ÅØ „Å©„ÇåÔºü",
"„Ç±„É≥„Ç∏„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Ç∏„Çß„Éº„É†„Çπ„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Ç®„Éü„É™„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü",
"„Éà„Éì„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü", "„Ç¶„Ç£„Éï„ÄÄ„ÅØ „Å©„ÇåÔºü", "„ÉÄ„Éº„Ç∑„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü",
"„ÇØ„É©„É≥„Ç≠„Éº„ÄÄ„ÅØ „Å©„ÇåÔºü",  "„Ç¢„Éã„Éº„Å®„ÇØ„É©„É©„Éô„É´„ÄÄ„ÅØ „Å©„ÇåÔºü",
    "„ÅÑ„Åü„Åö„Çâ„Éª„ÅÑ„Åò„Çè„Çã„Åã„Åó„ÇÉ„ÄÄ„ÅØ „Å©„ÇåÔºü"
  ];

  let currentQuestion = 0;
  let usedQuestions = [];
  let optionImgElems = [];

  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  function loadQuestion() {
    if (usedQuestions.length === 10) {
      document.getElementById("quizContainer").innerHTML = "<h2>10„ÇÇ„Çì„Åä„Çè„ÇäÔºÅ„Åì„Çå„Åß„Å©„ÅÜ„Å∂„Å§„ÅØ„Åã„Åõ„Å†„Å≠ÔºÅÔºÅ</h2>";
      return;
    }
    let qNum;
    do {
      qNum = Math.floor(Math.random() * 10);
    } while (usedQuestions.includes(qNum));
    usedQuestions.push(qNum);
    currentQuestion = qNum;
    document.getElementById("questionText").textContent = questions[qNum];
    const correctImg = (qNum + 1) + ".jpg";
    let wrongNum;
    do {
      wrongNum = Math.floor(Math.random() * 10);
    } while (wrongNum === qNum);
    const wrongImg = (wrongNum + 1) + ".jpg";
    const options = [
      {img: correctImg, isCorrect: true},
      {img: wrongImg, isCorrect: false}
    ];
    shuffleArray(options);
    const optionsContainer = document.getElementById("options");
    optionsContainer.innerHTML = "";
    optionImgElems = [];
    options.forEach(option => {
      const optionImg = document.createElement("img");
      optionImg.src = "images/" + option.img;
      optionImg.alt = "Option";
      optionImg.className = "option-img";
      optionImg.draggable = false;
      optionImg.oncontextmenu = (e) => e.preventDefault();
      optionImg.onmousedown = (e) => { if (e.button === 2) e.preventDefault(); };
      optionImg.ontouchstart = (e) => { if (e.touches.length > 1) e.preventDefault(); };
      optionImg.onclick = () => checkAnswer(option.isCorrect, optionImg);
      optionImg.onload = () => {
        const imgs = document.querySelectorAll('.option-img');
        let maxH = 0;
        imgs.forEach(img => { if (img.naturalHeight > maxH) maxH = img.naturalHeight; });
        imgs.forEach(img => { img.style.height = maxH + 'px'; });
      };
      optionsContainer.appendChild(optionImg);
      optionImgElems.push(optionImg);
    });
  }

  function checkAnswer(isCorrect, imgElem) {
    imgElem.classList.add("zoom");
    setTimeout(() => {
      imgElem.classList.remove("zoom");
      if (isCorrect) {
        document.getElementById("correctAudio").play();
        document.getElementById("resultImg").style.display = "block";
        setTimeout(() => {
          document.getElementById("resultImg").style.display = "none";
          loadQuestion();
        }, 2000);
      } else {
        document.getElementById("incorrectAudio").play();
      }
    }, 200);
  }

  document.getElementById('speakBtn').onclick = function() {
    const textElem = document.getElementById('questionText');
    const btnElem = document.getElementById('speakBtn');
    const text = textElem.textContent;
    if ('speechSynthesis' in window) {
      btnElem.classList.add('speaking');
      setTimeout(() => { btnElem.classList.remove('speaking'); }, 400);
      setTimeout(() => {
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = 'ja-JP';
        utter.onstart = function() {
          textElem.classList.add('speaking');
        };
        utter.onend = function() {
          textElem.classList.remove('speaking');
        };
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(utter);
      }, 1000);
    }
  };

  // Â∑¶Âè≥„ÇØ„É™„ÉÉ„ÇØ„Å´„Çà„ÇãÁîªÂÉèÈÅ∏Êäû„ÄÇ„Åü„Å†„Åó„Éû„Ç§„ÇØ„Éú„Çø„É≥„ÅØÁÑ°Ë¶ñ
  document.addEventListener('mousedown', function(e) {
    if (e.target.classList && e.target.classList.contains('option-img')) return;
    if (e.target.closest('#speakBtn')) return; // „Éû„Ç§„ÇØ„ÇíÈô§Â§ñ
    if (!optionImgElems || optionImgElems.length !== 2) return;
    if (e.button === 0) {
      checkAnswer(optionImgElems[0].src.includes((currentQuestion+1)+'.jpg'), optionImgElems[0]);
    } else if (e.button === 2) {
      checkAnswer(optionImgElems[1].src.includes((currentQuestion+1)+'.jpg'), optionImgElems[1]);
    }
  });

  // „Åù„ÅÆ‰ªñ„ÅÆÊìç‰ΩúÂà∂Èôê
  document.addEventListener('gesturestart', e => e.preventDefault());
  document.addEventListener('gesturechange', e => e.preventDefault());
  document.addEventListener('gestureend', e => e.preventDefault());
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('mousedown', e => { if (e.button === 2) e.preventDefault(); });
  document.addEventListener('touchstart', e => { if (e.touches.length > 1) e.preventDefault(); });
  document.addEventListener('selectstart', e => e.preventDefault());
  document.addEventListener('dragstart', e => e.preventDefault());
  document.addEventListener('scroll', e => { window.scrollTo(0,0); e.preventDefault(); }, {passive:false});
  window.addEventListener('wheel', e => e.preventDefault(), {passive:false});
  window.addEventListener('touchmove', e => e.preventDefault(), {passive:false});
  window.addEventListener('resize', () => window.scrollTo(0,0));

  // ÊúÄÂàù„ÅÆÂïèÈ°åË™≠„ÅøËæº„Åø
  loadQuestion();

  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/2taku/doubutu/service-worker.js')
        .then(registration => {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        })
        .catch(error => {
          console.log('ServiceWorker registration failed: ', error);
        });
    });
  }
</script>



</body></html>