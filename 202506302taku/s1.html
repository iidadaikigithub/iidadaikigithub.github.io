<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„ÇØ„Ç§„Ç∫</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #fff;
    }

    #quizContainer {
      width: 100vw;
      max-width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: 0;
    }

    #question {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 90vw;
      margin: 2vw 0 4vw 0;
      min-height: 10vw;
    }
    #questionText {
      font-size: 7vw;
      font-weight: bold;
      background: #fff;
      padding: 2vw 4vw;
      border-radius: 2vw;
      box-shadow: 0 0 0 0.5vw #000;
      z-index: 2;
      position: relative;
      display: inline-block;
      line-height: 1.2;
    }

    .options {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-end;
      gap: 5vw;
      width: 100vw;
      flex-wrap: wrap;
    }
    .option-img {
      width: 40vw;
      height: 22vw;
      max-width: 350px;
      max-height: 180px;
      min-width: 120px;
      min-height: 60px;
      margin: 2vw 1vw;
      cursor: pointer;
      border: 0.7vw solid #000;
      border-radius: 2vw;
      background: #fff;
      box-sizing: border-box;
      transition: transform 0.2s;
      touch-action: manipulation;
      user-select: none;
      -webkit-user-drag: none;
      aspect-ratio: 16/9;
      object-fit: cover;
      display: block;
    }
    .zoom {
      transform: scale(1.2);
    }
    #resultImg {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 80vw;
      max-height: 80vh;
      z-index: 9999;
    }
    @media (max-width: 900px) {
      #questionText {
        font-size: 8vw;
      }
      .option-img {
        width: 60vw;
        height: 32vw;
        max-width: 400px;
        max-height: 220px;
        min-width: 80px;
        min-height: 40px;
      }
      #speakBtn {
        font-size: 7vw;
        width: 8vw;
        height: 8vw;
      }
    }
    @media (max-width: 600px) {
      #questionText {
        font-size: 10vw;
      }
      .option-img {
        width: 80vw;
        height: 44vw;
        max-width: 98vw;
        max-height: 54vw;
        min-width: 60px;
        min-height: 30px;
      }
      #speakBtn {
        font-size: 8vw;
        width: 10vw;
        height: 10vw;
      }
    }
  </style>
</head>
<body>

<div id="quizContainer">
  <div id="question">
    <span id="questionText"></span>
    <button id="speakBtn" style="margin-left:2vw; font-size:6vw; background:#fff; border:1vw solid #000; border-radius:50%; width:10vw; height:10vw; display:flex; align-items:center; justify-content:center; cursor:pointer;">
      <span aria-label="„Éû„Ç§„ÇØ" role="img">üé§</span>
    </button>
  </div>
  <div id="options" class="options">
    <!-- Options will be dynamically added here -->
  </div>
  <audio id="correctAudio" src="audio/seikai.mp3"></audio>
  <audio id="incorrectAudio" src="audio/matigai.mp3"></audio>
  <img id="resultImg" src="images/seikai.gif" alt="Ê≠£Ëß£ÁîªÂÉè">
</div>

<script>
  // 10Âïè„ÅÆÂïèÈ°åÊñá
  const questions = [
    "„Çä„Çì„Åî „ÅØ „Å©„ÇåÔºü",//Á≠î„Åà„ÅØ1.jpg
    "„Éê„Éä„Éä „ÅØ „Å©„ÇåÔºü",//2
    "„Åø„Åã„Çì „ÅØ „Å©„ÇåÔºü",//3
    "„Å∂„Å©„ÅÜ „ÅØ „Å©„ÇåÔºü",//4
    "„Åô„ÅÑ„Åã „ÅØ „Å©„ÇåÔºü",//5
    "„ÅÑ„Å°„Åî „ÅØ „Å©„ÇåÔºü",//6
    "„ÇÇ„ÇÇ „ÅØ „Å©„ÇåÔºü",//7
    "„Å™„Åó „ÅØ „Å©„ÇåÔºü",//8
    "„Åï„Åè„Çâ„Çì„Åº „ÅØ „Å©„ÇåÔºü",//9
    "„É°„É≠„É≥ „ÅØ „Å©„ÇåÔºü"//10
  ];

  let currentQuestion = 0;
  let usedQuestions = [];

  // Utility function to shuffle an array
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // Function to load a new question
  function loadQuestion() {
    if (usedQuestions.length === 10) {
      document.getElementById("quizContainer").innerHTML = "<h2>„Åú„Çì„ÇÇ„Çì„Å†„ÅÑ„Åó„ÇÖ„ÅÜ„Çä„Çá„ÅÜÔºÅ</h2>";
      return;
    }
    // Ê¨°„ÅÆÊú™‰ΩøÁî®„ÅÆÂïèÈ°åÁï™Âè∑„ÇíÈÅ∏„Å∂
    let qNum;
    do {
      qNum = Math.floor(Math.random() * 10);
    } while (usedQuestions.includes(qNum));
    usedQuestions.push(qNum);
    currentQuestion = qNum;

    document.getElementById("questionText").textContent = questions[qNum];

    // Ê≠£Ëß£ÁîªÂÉè
    const correctImg = (qNum + 1) + ".jpg";
    // ‰∏çÊ≠£Ëß£ÁîªÂÉèÔºàÊ≠£Ëß£‰ª•Â§ñ„Åã„Çâ„É©„É≥„ÉÄ„É†Ôºâ
    let wrongNum;
    do {
      wrongNum = Math.floor(Math.random() * 10);
    } while (wrongNum === qNum);
    const wrongImg = (wrongNum + 1) + ".jpg";

    // ÈÅ∏ÊäûËÇ¢„Çí„É©„É≥„ÉÄ„É†ÈÖçÁΩÆ
    const options = [
      {img: correctImg, isCorrect: true},
      {img: wrongImg, isCorrect: false}
    ];
    shuffleArray(options);

    // Ë°®Á§∫
    const optionsContainer = document.getElementById("options");
    optionsContainer.innerHTML = "";
    options.forEach(option => {
      const optionImg = document.createElement("img");
      optionImg.src = "images/" + option.img;
      optionImg.alt = "Option";
      optionImg.className = "option-img";
      optionImg.draggable = false;
      optionImg.oncontextmenu = (e) => e.preventDefault();
      optionImg.onmousedown = (e) => { if (e.button === 2) e.preventDefault(); };
      optionImg.ontouchstart = (e) => { if (e.touches.length > 1) e.preventDefault(); };
      optionImg.onclick = (e) => checkAnswer(option.isCorrect, optionImg);
      // ÁîªÂÉè„ÅÆË™≠„ÅøËæº„ÅøÂÆå‰∫ÜÂæå„Å´È´ò„Åï„ÇíÊèÉ„Åà„Çã
      optionImg.onload = () => {
        const imgs = document.querySelectorAll('.option-img');
        let maxH = 0;
        imgs.forEach(img => { if (img.naturalHeight > maxH) maxH = img.naturalHeight; });
        imgs.forEach(img => { img.style.height = maxH + 'px'; });
      };
      optionsContainer.appendChild(optionImg);
    });
  }

  // Function to check the selected answer
  function checkAnswer(isCorrect, imgElem) {
    // „Ç∫„Éº„É†„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
    imgElem.classList.add("zoom");
    setTimeout(() => {
      imgElem.classList.remove("zoom");
      if (isCorrect) {
        document.getElementById("correctAudio").play();
        document.getElementById("resultImg").style.display = "block";
        setTimeout(() => {
          document.getElementById("resultImg").style.display = "none";
          loadQuestion();
        }, 2000);
      } else {
        document.getElementById("incorrectAudio").play();
      }
    }, 200);
  }

  // Ë™≠„Åø‰∏ä„Åí„Éú„Çø„É≥
  document.getElementById('speakBtn').onclick = function() {
    const text = document.getElementById('questionText').textContent;
    if ('speechSynthesis' in window) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'ja-JP';
      window.speechSynthesis.cancel(); // ÈÄ£ÊâìÂØæÁ≠ñ
      window.speechSynthesis.speak(utter);
    }
  };

  // „Éî„É≥„ÉÅ„Ç∫„Éº„É†„ÉªÂè≥„ÇØ„É™„ÉÉ„ÇØ„ÉªÈï∑Êäº„ÅóÁ¶ÅÊ≠¢
  document.addEventListener('gesturestart', function(e) { e.preventDefault(); });
  document.addEventListener('gesturechange', function(e) { e.preventDefault(); });
  document.addEventListener('gestureend', function(e) { e.preventDefault(); });
  document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
  document.addEventListener('mousedown', function(e) { if (e.button === 2) e.preventDefault(); });
  document.addEventListener('touchstart', function(e) { if (e.touches.length > 1) e.preventDefault(); });
  document.addEventListener('selectstart', function(e) { e.preventDefault(); });
  document.addEventListener('dragstart', function(e) { e.preventDefault(); });

  // Initial question load
  loadQuestion();
</script>

</body>
</html>
